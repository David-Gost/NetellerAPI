<!DOCTYPE html>
<html>
<head>
<title>NetellerAPI</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1>NETELLER REST API PHP Library</h1>
<h2>Introduction</h2>
<p>The NETELLER PHP Library provides PHP developers an easy way to integrate the NETELLER REST API. It is a client library which provides PHP classes that correspond to resources in the NETELLER REST API. </p>
<ul>
<li><a href="#Installation">Installation</a></li>
<li><a href="#Configuration">Configuration</a></li>
<li><a href="#NetellerAPI">NetellerAPI Class</a></li>
<li><a href="#requestPayment">RequestPayment Class</a></li>
<li><a href="#CreatePayment">CreatePayment Class</a></li>
<li><a href="#LookupPayment">LookupPayment Class</a></li>
<li><a href="#CreateOrder">CreateOrder Class</a></li>
<li><a href="#LookupOrder">LookupOrder Class</a></li>
<li><a href="#LookupOrderInvoice">LookupOrderInvoice Class</a></li>
<li><a href="#CreateCustomer">CreateCustomer Class</a></li>
<li><a href="#LookupCustomer">LookupCustomer Class</a></li>
<li><a href="#CreatePlan">CreatePlan Class</a></li>
<li><a href="#LookupPlan">LookupPlan Class</a></li>
<li><a href="#CancelPlan">CancelPlan Class</a></li>
<li><a href="#DeletePlan">DeletePlan Class</a></li>
<li><a href="#ListPlans">ListPlans Class</a></li>
<li><a href="#CreateSubscription">CreateSubscription Class</a></li>
<li><a href="#LookupSubscription">LookupSubscription Class</a></li>
<li><a href="#CancelSubscription">CancelSubscription Class</a></li>
<li><a href="#ListSubscriptions">ListSubscriptions Class</a></li>
<li><a href="#LookupSubscriptionInvoice">LookupSubscriptionInvoice Class</a></li>
<li><a href="#LookupAllSubscriptionInvoices">LookupAllSubscriptionInvoices Class</a></li>
<li><a href="#WebhookHandler">WebhookHandler Class</a></li>
</ul>
<h1>Installation <a name="Installation"></a></h1>
<p>Simply download and include the &quot;NetellerAPI.php&quot; file in your script.</p>
<pre><code>include_once(&quot;NetellerAPI.php&quot;);
</code></pre>

<h1>Configuration <a name="Configuration"></a></h1>
<p>You need to define the configuration details using the following PHP constants:</p>
<ul>
<li><strong>NETELLER_BASE_URL</strong> - should contain the relevant REST API endpoint depending on whether you are using the sandbox or live environment.</li>
<li><strong>NETELLER_CLIENT_ID</strong> - should contain the Client ID from the merchant account App.</li>
<li><strong>NETELLER_CLIENT_SECRET</strong> - should contain the Client Secret from the merchant account App.</li>
</ul>
<p>Example:</p>
<pre><code>define('NETELLER_BASE_URL', 'https://test.api.neteller.com/');
define('NETELLER_CLIENT_ID', 'AAABTAiQ9pKruN2Z');
define('NETELLER_CLIENT_SECRET', '0.iSLQ7zzMinac6SbI62onxTdqEYFES1LXoI4paRFFz74.4yFz4Pr3BMIccXgQOb3Ea_FNG2Y');
</code></pre>

<h1>NetellerAPI Class <a name="NetellerAPI"></a></h1>
<p>A parent class which all classes below extend.</p>
<h2>Methods</h2>
<ul>
<li><strong>getIP()</strong> - Returns the outgoing IP address of the server where the script is hosted using an external service. Useful for debugging the &quot;invalid_client&quot; API error.</li>
<li><strong>getUrl(string $url)</strong> - Executes a GET request to a URL from the NETELLER API and returns the result. Useful when implementing webhooks.</li>
<li><strong>getToken_ClientCredentials()</strong> - Returns a new access token - &quot;client_credentials&quot; grant type.</li>
<li><strong>getToken_AuthCode(string $authCode, string $redirectUri)</strong> - Returns a new access token - &quot;auth_code&quot; grant type.</li>
<li><strong>getToken_RefreshToken(string $refreshToken)</strong> - Returns a new access token using a refresh token.</li>
</ul>
<h2>Example</h2>
<pre><code>$api = new NetellerAPI();
$ip = $api-&gt;getIP();
var_dump($ip);
</code></pre>

<p>It can also be used in the context of a child class:</p>
<pre><code>$deposit = new RequestPayment();
$deposit-&gt;setPaymentMethodValue('netellertest_USD@neteller.com')
        -&gt;setVerificationCode(270955)
        -&gt;setTransactionMerchantRefId('adfiu1i23478172349a')
        -&gt;setTransactionAmount(1234)
        -&gt;setTransactionCurrency('USD');
$result = $deposit-&gt;doRequest();
$ip = $deposit-&gt;getIP();

var_dump($result);
var_dump($ip);
</code></pre>

<h1>RequestPayment Class <a name="requestPayment"></a></h1>
<p>Creates a new incoming transfer payment. </p>
<h2>Methods</h2>
<ul>
<li><strong>setPaymentMethodValue(string $paymentMethod)</strong> - Sets the member's email or 12 digit NETELLER Account ID.</li>
<li><strong>setVerificationCode(string $verificationCode)</strong> - Sets the member's Secure ID or Google Authenticator OTP. </li>
<li><strong>setTransactionMerchantRefId(string $merchantRefId)</strong> - Sets the merchant reference ID.</li>
<li><strong>setTransactionAmount(int $transactionAmount)</strong> - Sets the amount for the transaction.</li>
<li><strong>setTransactionCurrency(string $transactionCurrency)</strong> - Sets the currency for the transaction.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$deposit = new RequestPayment();
$deposit-&gt;setPaymentMethodValue('netellertest_USD@neteller.com')
        -&gt;setVerificationCode(270955)
        -&gt;setTransactionMerchantRefId('adfiu1i23478172349a')
        -&gt;setTransactionAmount(1234)
        -&gt;setTransactionCurrency('USD');
$result = $deposit-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CreatePayment Class <a name="CreatePayment"></a></h1>
<p>Creates a new outgoing payment. </p>
<h2>Methods</h2>
<ul>
<li><strong>setPayeeProfileEmail(string $payeeProfileEmail)</strong> - Sets the email of the member receiving the payment.</li>
<li><strong>setTransactionAmount(int $transactionAmount)</strong> - Sets the amount for the transaction.</li>
<li><strong>setTransactionCurrency(string $transactionCurrency)</strong> - Sets the currency for the transaction.</li>
<li><strong>setTransactionMerchantRefId(string $transactionMerchantRefId)</strong> - Sets the merchant reference ID.</li>
<li><strong>setMessage(string $message)</strong> - Sets the message that will be shown to the member notifying them of the pending transfer.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$withdrawal = new CreatePayment();
$withdrawal-&gt;setPayeeProfileEmail('netellertest_USD@neteller.com')
           -&gt;setTransactionAmount(1234)
           -&gt;setTransactionCurrency('USD')
           -&gt;setTransactionMerchantRefId('adfiu1i23478172349W2')
           -&gt;setMessage('sample message');
$result = $withdrawal-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupPayment Class <a name="LookupPayment"></a></h1>
<p>Returns details about a previous payment request.</p>
<h2>Methods</h2>
<ul>
<li><strong>setTransactionId(string $transactionId)</strong> - Sets the NETELLER transaction ID of the transaction you want to look up. You can either use this method or use &quot;setMerchantRefId&quot;.</li>
<li><strong>setMerchantRefId(string $merchantRefId)</strong> - Sets the merchant reference ID of the transaction you want to look up. You can either use this method or use &quot;setTransactionId&quot;.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupPayment();
$lookup-&gt;setTransactionId('850430740226289')
       -&gt;setExpand('customer');
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CreateOrder Class <a name="CreateOrder"></a></h1>
<p>Creates a payment order for NETELLERgo! You will need to redirect your customer to the returned URL to initiate the hosted Quick Checkout flow and collect the payment.</p>
<h2>Methods</h2>
<ul>
<li><strong>setOrderMerchantRefId(string $orderMerchantRefId)</strong> - Sets the merchant reference ID.</li>
<li><strong>setOrderTotalAmount(int $orderTotalAmount)</strong> - Sets the total amount for the order.</li>
<li><strong>setOrderCurrency(string $orderCurrency)</strong> - Sets the currency for the order.</li>
<li><strong>setOrderLang(string $orderLang)</strong> - Sets the language of the hosted payment page.</li>
<li><strong>setOrderCustomerIp(string $orderCustomerIp)</strong> - Sets the IP address of the customer.</li>
<li><strong>setItems(array $item)</strong> - Sets the item you are requesting payment for. </li>
<li><strong>setFees(array $fee)</strong> - Sets the fee for this order.</li>
<li><strong>setTaxes(array $tax)</strong> - Sets the tax for this order.</li>
<li><strong>setPaymentMethods(array $paymentMethod)</strong> - sets the allowed payment methods for this order.</li>
<li><strong>setRedirectOnSuccess(string $url)</strong> - Sets the success redirect URL.</li>
<li><strong>setRedirectOnCancel(string $url)</strong> - Sets the cancel redirect URL.</li>
<li><strong>setBillingDetailsEmail(string $billingDetailsEmail)</strong> - Sets the email address of the customer.</li>
<li><strong>setBillingDetailsCountry(string $billingDetailsCountry)</strong> - Sets the country of residence of the customer (ISO 3166-1 Alpha 2-code)</li>
<li><strong>setBillingDetailsFirstName(string $billingDetailsFirstName)</strong> - Sets the First Name of the customer.</li>
<li><strong>setBillingDetailsLastName(string $billingDetailsLastName)</strong> - Sets the Last Name of the customer.</li>
<li><strong>setBillingDetailsCity(string $billingDetailsCity)</strong> - Sets the city of residence of the customer.</li>
<li><strong>setBillingDetailsAddress1(string $billingDetailsAddress1)</strong> - Sets the address (line 1) of the customer.</li>
<li><strong>setBillingDetailsAddress2(string $billingDetailsAddress2)</strong> - Sets the address (line 2) of the customer.</li>
<li><strong>setBillingDetailsAddress3(string $billingDetailsAddress3)</strong> - Sets the address (line 3) of the customer.</li>
<li><strong>setBillingDetailsCountrySubDivisionCode(string $countrySubDivisionCode)</strong> - Sets the country subdivision code of the customer. The ISO 3166-2 code indicating the state/province/district or other value denoting the clients country subdivision</li>
<li><strong>setBillingDetailsPostCode(string $billingDetailsPostCode)</strong> - Sets the post code of the customer.</li>
<li><strong>setBillingDetailsLang(string $billingDetailsLang)</strong> - Sets the preferred language of communication of the customer.   </li>
<li><strong>setAttributes(array $attribute)</strong> - Sets additional attributes for this order.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getRedirectUrl()</strong> - Returns the URL where the client needs to be redirected to complete the payment.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$order = new CreateOrder();
$order-&gt;setOrderMerchantRefId('adfiu1i23478172349o1')
      -&gt;setOrderTotalAmount(2099)
      -&gt;setOrderCurrency('USD')
      -&gt;setOrderLang('en_US')
      -&gt;setItems(array
                    (
                        &quot;quantity&quot; =&gt; 1,
                        &quot;name&quot; =&gt; &quot;Item A&quot;,
                        &quot;description&quot; =&gt; &quot;Lorem ipsum dolor sit amet&quot;,
                        &quot;sku&quot; =&gt; &quot;XYZPART1&quot;,
                        &quot;amount&quot; =&gt; 1000
                    )
                )
      -&gt;setItems(array
                    (
                        &quot;quantity&quot; =&gt; 2,
                        &quot;name&quot; =&gt; &quot;Item B&quot;,
                        &quot;description&quot; =&gt; &quot;Consectetur adipiscing elit&quot;,
                        &quot;sku&quot; =&gt; &quot;XYZPART2&quot;,
                        &quot;amount&quot; =&gt; 200
                    )
                )
      -&gt;setFees(array
                    (
                        &quot;feeName&quot; =&gt; &quot;Setup Fee&quot;,
                        &quot;feeAmount&quot; =&gt; 500
                    )
                )
      -&gt;setTaxes(array
                    (
                        &quot;taxName&quot; =&gt; &quot;VAT&quot;,
                        &quot;taxAmount&quot; =&gt; 199
                    )
                )
      -&gt;setPaymentMethods(array
                (
                    &quot;type&quot; =&gt; &quot;onlinebanking&quot;,
                    &quot;value&quot; =&gt; &quot;sofortbanking&quot;
                )
            )
      -&gt;setRedirectOnSuccess(&quot;https://example.com/success.html&quot;)
      -&gt;setRedirectOnCancel(&quot;https://example.com/cancel.html&quot;)
      -&gt;setBillingDetailsEmail(&quot;netellertest_USD@neteller.com&quot;)
      -&gt;setBillingDetailsCountry(&quot;DE&quot;)
      -&gt;setBillingDetailsFirstName(&quot;John&quot;)
      -&gt;setBillingDetailsLastName(&quot;Smith&quot;)
      -&gt;setBillingDetailsCity(&quot;Calgary&quot;)
      -&gt;setBillingDetailsAddress1(&quot;address line 1&quot;)
      -&gt;setBillingDetailsAddress2(&quot;address line 2&quot;)
      -&gt;setBillingDetailsAddress3(&quot;address line 3&quot;)
      -&gt;setBillingDetailsCountrySubDivisionCode(&quot;AB&quot;)
      -&gt;setBillingDetailsPostCode(&quot;T8A22J&quot;)
      -&gt;setBillingDetailsLang(&quot;en&quot;);
$result = $order-&gt;doRequest();
$redirectUrl = $order-&gt;getRedirectUrl();
var_dump($result);
var_dump($redirectUrl);
</code></pre>

<h1>LookupOrder Class <a name="LookupOrder"></a></h1>
<p>Returns details about a previous order request.</p>
<h2>Methods</h2>
<ul>
<li><strong>setOrderId(string $orderId)</strong> - Sets the order ID.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupOrder();
$lookup-&gt;setOrderId(&quot;ORD_1f21ca9d-e647-46bc-9dde-91c70632e587&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupOrderInvoice Class <a name="LookupOrderInvoice"></a></h1>
<p>Returns details about an invoice for an order.</p>
<h2>Methods</h2>
<ul>
<li><strong>setOrderId(string $orderId)</strong> - Sets the order ID.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupOrderInvoice();
$lookup-&gt;setOrderId(&quot;ORD_5c0023d3-c928-4771-9016-1fc169283b0f&quot;)
       -&gt;setExpand(&quot;customer,order&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CreateCustomer Class <a name="CreateCustomer"></a></h1>
<p>Pre-populate the NETELLER sign-up page with information from your database, so you can speed up the registration process. </p>
<h2>Methods</h2>
<ul>
<li><strong>setEmail(string $email)</strong> - Sets the email of the customer.</li>
<li><strong>setFirstName(string $firstName)</strong> - Sets the first name of the customer.</li>
<li><strong>setLastName(string $lastName)</strong> - Sets the last name of the customer.</li>
<li><strong>setAddress1(string $address1)</strong> - Sets the address line 1 of the customer.</li>
<li><strong>setAddress2(string $address2)</strong> - Sets the address line 2 of the customer.</li>
<li><strong>setAddress3(string $address3)</strong> - Sets the address line 3 of the customer.</li>
<li><strong>setCity(string $city)</strong> - Sets the city of the customer.</li>
<li><strong>setCountry(string $country)</strong> - Sets the country of the customer. ISO 3166-1 Alpha 2-code.</li>
<li><strong>setCountrySubDivisionCode(string $countrySubDivisionCode)</strong> - Sets the state/province of the customer. ISO 3166-2 code.</li>
<li><strong>setPostCode(string $postCode)</strong> - Sets the post code of the customer.</li>
<li><strong>setGender(string $gender)</strong> - Sets the gender of the customer.</li>
<li><strong>setDobDay(string $dobDay)</strong> - Sets the date of birth day of the customer.</li>
<li><strong>setDobMonth(string $dobMonth)</strong> - Sets the date of birth month of the customer.</li>
<li><strong>setDobYear(string $dobYear)</strong> - Sets the date of birth year of the customer.</li>
<li><strong>setLanguage(string $language)</strong> - Sets the preferred language of the customer.</li>
<li><strong>setCurrency(string $currency)</strong> - Sets the preferred currency of the customer.</li>
<li><strong>setMobile(string $mobile)</strong> - Sets the mobile phone of the customer.</li>
<li><strong>setLandLine(string $landLine)</strong> - Sets the land line phone of the customer.</li>
<li><strong>setBtag(string $btag)</strong> - sets the btag, used for affiliate tracking.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getRedirectUrl()</strong> - Returns the URL where the client needs to be redirected to complete the sign-up.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$signup = new CreateCustomer();
$signup-&gt;setEmail(&quot;john.smith@example.com&quot;)
       -&gt;setFirstName(&quot;John&quot;)
       -&gt;setLastName(&quot;Smith&quot;)
       -&gt;setAddress1(&quot;address line 1&quot;)
       -&gt;setAddress2(&quot;address line 2&quot;)
       -&gt;setAddress3(&quot;address line 3&quot;)
       -&gt;setCity(&quot;Calgary&quot;)
       -&gt;setCountry(&quot;CA&quot;)
       -&gt;setCountrySubDivisionCode(&quot;AB&quot;)
       -&gt;setPostCode(&quot;T8A22J&quot;)
       -&gt;setGender(&quot;m&quot;)
       -&gt;setDobDay(&quot;31&quot;)
       -&gt;setDobMonth(&quot;01&quot;)
       -&gt;setDobYear(&quot;1975&quot;)
       -&gt;setLanguage(&quot;en_US&quot;)
       -&gt;setCurrency(&quot;EUR&quot;)
       -&gt;setMobile(&quot;14035552333&quot;)
       -&gt;setLandLine(&quot;14032332333&quot;)
       -&gt;setLinkBackUrl(&quot;https://example.com/&quot;)
       -&gt;setBtag(&quot;A_234B_345C_&quot;);
$response = $signup-&gt;doRequest();
$redirectUrl = $signup-&gt;getRedirectUrl();
var_dump($response);
var_dump($redirectUrl);
</code></pre>

<h1>LookupCustomer Class <a name="LookupCustomer"></a></h1>
<p>Lookup details for a specific customer.</p>
<h2>Methods</h2>
<ul>
<li><strong>setAccountId(string $accountId)</strong> - Sets the account ID of the customer. You can either use this method or &quot;setCustomerId&quot; and &quot;setEmail&quot;.</li>
<li><strong>setCustomerId(string $customerId)</strong> - Sets the customer ID of the customer. You can either use this method or &quot;setAccountId&quot; and &quot;setEmail&quot;.</li>
<li><strong>setEmail(string $email)</strong> - Sets the email of the customer. You can either use this method or &quot;setAccountId&quot; and &quot;setCustomerId&quot;.</li>
<li><strong>setRefreshToken(string $refreshToken)</strong> -  Sets the refresh token to be used in order to obtain an access token. You can either use this method or use &quot;setAuthCode&quot;. This method is used only when you want to receive customer data outside of the default scope.</li>
<li><strong>setAuthCode(string $authCode)</strong> - Sets the authentication code to be used in order to obtain an access token. You can either use this method or use &quot;setRefreshToken&quot;. This method is used only when you want to receive customer data outside of the default scope.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupCustomer();
$lookup-&gt;setCustomerId(&quot;453523712313&quot;)
       -&gt;setRefreshToken(&quot;0.AgAAAU0yy4sHAAAAB1jwsOC9J7TBAYynTble-g2fdC-d.7xIAyXxQWsDaiLzjY4qimsqfyYU&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CreatePlan Class <a name="CreatePlan"></a></h1>
<p>Creates a subscription plan.</p>
<h2>Methods</h2>
<ul>
<li><strong>setPlanId(string $planId)</strong> - Sets the unique ID for the plan.</li>
<li><strong>setPlanName(string $planName)</strong> - Sets the name of the plan.</li>
<li><strong>setInterval(int $interval)</strong> - Sets the number of intervals between each billing attempt.</li>
<li><strong>setIntervalType(string $intervalType)</strong> - Sets the frequency at which the plan subscriber will be billed (daily, weekly, monthly, yearly).</li>
<li><strong>setIntervalCount(int $intervalCount)</strong> - Sets the length of the contract in intervals.</li>
<li><strong>setAmount(int $amount)</strong> - Sets the amount to bill for each recurring payment.</li>
<li><strong>setCurrency(string $currency)</strong> - Sets the currency in which the customer will be billed.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$plan = new CreatePlan();
$plan-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;)
     -&gt;setPlanName(&quot;Sample Premier Monthly Membership&quot;)
     -&gt;setInterval(3)
     -&gt;setIntervalType(&quot;monthly&quot;)
     -&gt;setIntervalCount(4)
     -&gt;setAmount(2995)
     -&gt;setCurrency(&quot;USD&quot;);
$result = $plan-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupPlan Class <a name="LookupPlan"></a></h1>
<p>Returns details about a previously created subscription plan.</p>
<h2>Methods</h2>
<ul>
<li><strong>setPlanId(string $planId)</strong> - Sets the plan ID.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupPlan();
$lookup-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CancelPlan Class <a name="CancelPlan"></a></h1>
<p>Cancels a previously created subscription plan.</p>
<h2>Methods</h2>
<ul>
<li><strong>setPlanId(string $planId)</strong> - Sets the plan ID.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$plan = new CancelPlan();
$plan-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;);
$result = $plan-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>Delete Plan <a name="DeletePlan"></a></h1>
<p>Deletes a previously created subscription plan.</p>
<h2>Methods</h2>
<ul>
<li><strong>setPlanId(string $planId)</strong> - Sets the plan ID.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$plan = new DeletePlan();
$plan-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;);
$result = $plan-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>ListPlans Class <a name="ListPlans"></a></h1>
<p>Returns a list of all plans.</p>
<h2>Methods</h2>
<ul>
<li><strong>setLimit(int $limit)</strong> - Sets the number of records to be returned. </li>
<li><strong>setOffset(int $offset)</strong> - Sets the results offset.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$plans = new ListPlans();
$plans-&gt;setLimit(10)
      -&gt;setOffset(0);
$result = $plans-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CreateSubscription Class <a name="CreateSubscription"></a></h1>
<p>Enrolls an existing NETELLER account holder in one of your subscription plans.</p>
<h2>Methods</h2>
<ul>
<li><strong>setPlanId(string $planId)</strong> - Sets the plan ID.</li>
<li><strong>setCustomerId(string $customerId)</strong> - Sets the Customer ID of the customer to be subscribed.</li>
<li><strong>setStartDate(string $startDate)</strong> - Sets the start date for the subscription. The date needs to be in ISO 8601 format (UTC).</li>
<li><strong>setRefreshToken(string $refreshToken)</strong> - Sets the refresh token to be used in order to obtain an access token. You can either use this method or use &quot;setAuthCode&quot;.</li>
<li><strong>setAuthCode(string $authCode)</strong> - Sets the authentication code to be used in order to obtain an access token. You can either use this method or use &quot;setRefreshToken&quot;.</li>
<li><strong>setRedirectUri(string $redirectUri)</strong> - Sets the redirect URI.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Examples</h2>
<h3>Using Authorization code</h3>
<pre><code>$subscription = new CreateSubscription();
$subscription-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;)
             -&gt;setAccountProfileEmail(&quot;netellertest_USD@neteller.com&quot;)
             -&gt;setStartDate(&quot;2015-05-09T00:00:00Z&quot;)
             -&gt;setAuthCode(&quot;0.AAAAAU0yjMR5AAAAAAAEk-B1A0yk5HA7RZkwz9zQYRFN.eNw8W12CqB06b2Qc2rvr3vUyc-g&quot;)
             -&gt;setRedirectUri(&quot;https://example.com/&quot;)
             -&gt;setExpand(&quot;plan,customer&quot;);
$result = $subscription-&gt;doRequest();
var_dump($result);
</code></pre>

<h3>Using Refresh token</h3>
<pre><code>$subscription = new CreateSubscription();
$subscription-&gt;setPlanId(&quot;MONTHLYGREENPLAN&quot;)
             -&gt;setAccountProfileEmail(&quot;netellertest_USD@neteller.com&quot;)
             -&gt;setStartDate(&quot;2015-05-09T00:00:00Z&quot;)
             -&gt;setRefreshToken(&quot;0.AgAAAU0yy4sHAAAAB1jwsOC9J7TBAYynTble-g2fdC-d.7xIAyXxQWsDaiLzjY4qimsqfyYU&quot;)
             -&gt;setRedirectUri(&quot;https://example.com/&quot;)
             -&gt;setExpand(&quot;plan,customer&quot;);
$result = $subscription-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupSubscription Class <a name="LookupSubscription"></a></h1>
<p>Returns details about a previously created subscription.</p>
<h2>Methods</h2>
<ul>
<li><strong>setSubscriptionId(string $subscriptionId)</strong> - Sets the subscription ID.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupSubscription();
$lookup-&gt;setSubscriptionId(&quot;180&quot;)
       -&gt;setExpand(&quot;plan,customer&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>CancelSubscription Class <a name="CancelSubscription"></a></h1>
<p>Cancels a previously created subscription.</p>
<h2>Methods</h2>
<ul>
<li><strong>setSubscriptionId(string $subscriptionId)</strong> - Sets the subscription ID.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$subscription = new CancelSubscription();
$subscription-&gt;setSubscriptionId(&quot;181&quot;);
$result = $subscription-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>ListSubscriptions Class <a name="ListSubscriptions"></a></h1>
<p>Lists all previously created subscriptions.</p>
<h2>Methods</h2>
<ul>
<li><strong>setLimit(int $limit)</strong> - Sets the number of records to be returned. </li>
<li><strong>setOffset(int $offset)</strong> - Sets the results offset.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$subscriptions = new ListSubscriptions();
$subscriptions-&gt;setLimit(10)
              -&gt;setOffset(0);
$result = $subscriptions-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupSubscriptionInvoice Class <a name="LookupSubscriptionInvoice"></a></h1>
<p>Looks up a subscription invoice.</p>
<h2>Methods</h2>
<ul>
<li><strong>setSubscriptionId(string $subscriptionId)</strong> - Sets the subscription ID.</li>
<li><strong>setInvoiceNumber(int $invoiceNumber)</strong> - Sets the invoice number.</li>
<li><strong>setExpand(string $expandObjects)</strong> - A list of comma-separated names of objects to be expanded in the NETELLER REST API response.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupSubscriptionInvoice();
$lookup-&gt;setSubscriptionId(166)
       -&gt;setInvoiceNumber(42)
       -&gt;setExpand(&quot;customer, subscription&quot;);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>LookupAllSubscriptionInvoices Class <a name="LookupAllSubscriptionInvoices"></a></h1>
<p>Looks up all subscription invoices.</p>
<h2>Methods</h2>
<ul>
<li><strong>setSubscriptionId(string $subscriptionId)</strong> - Sets the subscription ID.</li>
<li><strong>setLimit(int $limit)</strong> - Sets the number of records to be returned. </li>
<li><strong>setOffset(int $offset)</strong> - Sets the results offset.</li>
<li><strong>doRequest()</strong> - Executes the API request. Returns the JSON-decoded object of the NETELLER REST API response, or &quot;(bool)false&quot; if an error has occurred.</li>
<li><strong>getExecutionErrors()</strong> - Returns an array with the error(s) returned by the NETELLER REST API.</li>
</ul>
<h2>Example</h2>
<pre><code>$lookup = new LookupAllSubscriptionInvoices();
$lookup-&gt;setSubscriptionId(166)
       -&gt;setLimit(10)
       -&gt;setOffset(0);
$result = $lookup-&gt;doRequest();
var_dump($result);
</code></pre>

<h1>WebhookHandler Class <a name="WebhookHandler"></a></h1>
<p>Handles incoming webhook requests.</p>
<h2>Methods</h2>
<ul>
<li><strong>handleRequest()</strong> - Receives the webhook request and calls a callback function passing through the webhook data. You need to give the callback function(s) the same name as the webhook(s) you are subscribed to. Please refer to the REST API Guide for a list of all webhook names.</li>
</ul>
<h2>Example</h2>
<pre><code>$webhook = new WebhookHandler();
$webhook-&gt;handleRequest();

function payment_succeeded($data){
    $api = new NetellerAPI();
    $result = $api-&gt;getUrl($data-&gt;links[0]-&gt;url);
    //do something with the response here
}
</code></pre>


</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
